const villiansHold = [
  {
    name: "Dr. Julius No",
    movie: "Dr. No",
    fate: "was boiled to death in his own reactor coolant after a fight with Bond",
    pic: '/pics/drno.jpg',
    audio: "./auds/drno.mp3"
  },
  {
    name: "Rosa Klebb",
    movie: "From Russia With Love",
    fate: "was shot in the chest by Tatiana Romanova",
    pic: '/pics/klebb.jpg',
    audio: "./auds/klebb.m4a"
  },
  {
    name: "Auric Goldfinger",
    movie: "Goldfinger",
    fate: "was sucked out of a depressurising plane through a shattered window",
    pic: '/pics/gold.jpg',
    audio: "./auds/gold.mp3"
  },
  {
    name: "Emilio Largo",
    movie: "Thnderball",
    fate: "was shot with a harpoon from a speargun fired by his mistress Domino",
    pic: '/pics/largo.png',
    audio: "./auds/largo.mp3"
  },
  {
    name: "Blofeld (Donald Pleasence)",
    movie: "You Only Live Twice",
    fate: "survives; albiet with a lower arm injury from Tanaka's throwing star.",
    pic: '/pics/blofeld.jpg',
    audio: "./auds/blofeld.mp3"
  },
  {
    name: "Blofeld (Telly Savalas)",
    movie: "On Her Majesty's Secret Service",
    fate: "survives. Aids in the assassination of Tracy di Vicenzo, Bond's newly married wife on their honeymoon.",
    pic: '/pics/blofeld2.jpg',
    audio: "./auds/blofeld2.mp3"
  },
  {
    name: "Blofeld (Charles Grey)",
    movie: "Diamonds are Forever",
    fate: "is presumed dead",
    pic: '/pics/blofeld3.jpg',
    audio: "./auds/blofeld3.m4a"
  },
  {
    name: "Dr. Kananga/Mr.Big",
    movie: "Live and Let Die",
    fate: "has his body inflate and explode after Bond forces a compressed-gas capsule down his throat. ",
    pic: '/pics/mrbig.jpg',
    audio: "./auds/mrbig.mp3"
  },
  {
    name: "Francisco Scaramanga",
    movie: "The Man with the Golden Gun",
    fate: "was shot in the chest by Bond in the Hall of Mirrors when Bond pretends to be a statue of himself.",
    pic: './pics/scar.jpg',
    audio: "./auds/scar.mp3"
  },
  {
    name: "Karl Stromberg",
    movie: "The Spy Who Loved Me",
    fate: "was shot 4 times by Bond",
    pic: './pics/strom.jpg',
    audio: "./auds/strom.mp3"
  },
  {
    name: "Hugo Drax",
    movie: "Moonraker",
    fate: "was shot with poison dart gun and ejected into outer space, by Bond. ",
    pic: './pics/drax.jpg',
    audio: "./auds/drax.mp3"
  },
  {
    name: "Aristotle Kristatos",
    movie: "For Your Eyes Only",
    fate: "was killed with a knife thrown by Milos Columbo. ",
    pic: './pics/ari.jpg',
    audio: "./auds/ari.mp3"
  },
  {
    name: "Kamal Khan",
    movie: "Octopussy",
    fate: "dies when his plane crashes into a mountain. ",
    pic: './pics/khan.jpg',
    audio: "./auds/khan.mp3"
  },
  {
    name: "Max Zorin",
    movie: "A View to a Kill",
    fate: "falls to his death from the top of the Golden Gate Bridge after a fight with Bond. ",
    pic: './pics/zorin.jpg',
    audio: "./auds/zorin.mp3"
  },
  {
    name: "General Georgi Koskov",
    movie: "The Living Daylights",
    fate: "was arrested and implied to be executed by Pushkin's government offscreen. ",
    pic: './pics/georgi.jpg',
    audio: "./auds/georgi.mp3"
  },
  {
    name: "Dr. Julius No",
    movie: "Dr. No",
    fate: "was boiled to death in his own reactor coolant after a fight with Bond",
    pic: './pics/drno.jpg',
    audio: "./auds/drno.mp3"
  },
  {
    name: "Rosa Klebb",
    movie: "From Russia With Love",
    fate: "was shot in the chest by Tatiana Romanova",
    pic: './pics/klebb.jpg',
    audio: "./auds/klebb.m4a"
  },
  {
    name: "Auric Goldfinger",
    movie: "Goldfinger",
    fate: "was sucked out of a depressurising plane through a shattered window",
    pic: './pics/gold.jpg',
    audio: "./auds/gold.mp3"
  },
  {
    name: "Emilio Largo",
    movie: "Thnderball",
    fate: "was shot with a harpoon from a speargun fired by his mistress Domino",
    pic: './pics/largo.png',
    audio: "./auds/largo.mp3"
  },
  {
    name: "Blofeld (Donald Pleasence)",
    movie: "You Only Live Twice",
    fate: "survives; albiet with a lower arm injury from Tanaka's throwing star.",
    pic: './pics/blofeld.jpg',
    audio: "./auds/blofeld.mp3"
  },
  {
    name: "Blofeld (Telly Savalas)",
    movie: "On Her Majesty's Secret Service",
    fate: "survives. Aids in the assassination of Tracy di Vicenzo, Bond's newly married wife on their honeymoon.",
    pic: './pics/blofeld2.jpg',
    audio: "./auds/blofeld2.mp3"
  },
  {
    name: "Blofeld (Charles Grey)",
    movie: "Diamonds are Forever",
    fate: "is presumed dead",
    pic: './pics/blofeld3.jpg',
    audio: "./auds/blofeld3.m4a"
  },
  {
    name: "Dr. Kananga/Mr.Big",
    movie: "Live and Let Die",
    fate: "has his body inflate and explode after Bond forces a compressed-gas capsule down his throat. ",
    pic: './pics/mrbig.jpg',
    audio: "./auds/mrbig.mp3"
  },
  {
    name: "Francisco Scaramanga",
    movie: "The Man with the Golden Gun",
    fate: "was shot in the chest by Bond in the Hall of Mirrors when Bond pretends to be a statue of himself.",
    pic: './pics/scar.jpg',
    audio: "./auds/scar.mp3"
  },
  {
    name: "Karl Stromberg",
    movie: "The Spy Who Loved Me",
    fate: "was shot 4 times by Bond",
    pic: './pics/strom.jpg',
    audio: "./auds/strom.mp3"
  },
  {
    name: "Hugo Drax",
    movie: "Moonraker",
    fate: "was shot with poison dart gun and ejected into outer space, by Bond. ",
    pic: './pics/drax.jpg',
    audio: "./auds/drax.mp3"
  },
  {
    name: "Aristotle Kristatos",
    movie: "For Your Eyes Only",
    fate: "was killed with a knife thrown by Milos Columbo. ",
    pic: './pics/ari.jpg',
    audio: "./auds/ari.mp3"
  },
  {
    name: "Kamal Khan",
    movie: "Octopussy",
    fate: "dies when his plane crashes into a mountain. ",
    pic: './pics/khan.jpg',
    audio: "./auds/khan.mp3"
  },
  {
    name: "Max Zorin",
    movie: "A View to a Kill",
    fate: "falls to his death from the top of the Golden Gate Bridge after a fight with Bond. ",
    pic: './pics/zorin.jpg',
    audio: "./auds/zorin.mp3"
  },
  {
    name: "General Georgi Koskov",
    movie: "The Living Daylights",
    fate: "was arrested and implied to be executed by Pushkin's government offscreen. ",
    pic: './pics/georgi.jpg',
    audio: "./auds/georgi.mp3"
  }
  ];

  const villiansProto = [
    {
      name: "Dr. Julius No",
      movie: "Dr. No",
      fate: "was boiled to death in his own reactor coolant after a fight with Bond",
      pic: '/pics/drno.jpg',
      audio: "./auds/drno.mp3"
    },
    {
      name: "Rosa Klebb",
      movie: "From Russia With Love",
      fate: "was shot in the chest by Tatiana Romanova",
      pic: '/pics/klebb.jpg',
      audio: "./auds/klebb.m4a"
    },
    {
      name: "Auric Goldfinger",
      movie: "Goldfinger",
      fate: "was sucked out of a depressurising plane through a shattered window",
      pic: '/pics/gold.jpg',
      audio: "./auds/gold.mp3"
    },
    {
      name: "Emilio Largo",
      movie: "Thnderball",
      fate: "was shot with a harpoon from a speargun fired by his mistress Domino",
      pic: '/pics/largo.png',
      audio: "./auds/largo.mp3"
    },
    {
      name: "Blofeld (Donald Pleasence)",
      movie: "You Only Live Twice",
      fate: "survives; albiet with a lower arm injury from Tanaka's throwing star.",
      pic: '/pics/blofeld.jpg',
      audio: "./auds/blofeld.mp3"
    },
    {
      name: "Blofeld (Telly Savalas)",
      movie: "On Her Majesty's Secret Service",
      fate: "survives. Aids in the assassination of Tracy di Vicenzo, Bond's newly married wife on their honeymoon.",
      pic: '/pics/blofeld2.jpg',
      audio: "./auds/blofeld2.mp3"
    },
    {
      name: "Blofeld (Charles Grey)",
      movie: "Diamonds are Forever",
      fate: "is presumed dead",
      pic: '/pics/blofeld3.jpg',
      audio: "./auds/blofeld3.m4a"
    },
    {
      name: "Dr. Kananga/Mr.Big",
      movie: "Live and Let Die",
      fate: "has his body inflate and explode after Bond forces a compressed-gas capsule down his throat. ",
      pic: '/pics/mrbig.jpg',
      audio: "./auds/mrbig.mp3"
    },
    {
      name: "Francisco Scaramanga",
      movie: "The Man with the Golden Gun",
      fate: "was shot in the chest by Bond in the Hall of Mirrors when Bond pretends to be a statue of himself.",
      pic: './pics/scar.jpg',
      audio: "./auds/scar.mp3"
    },
    {
      name: "Karl Stromberg",
      movie: "The Spy Who Loved Me",
      fate: "was shot 4 times by Bond",
      pic: './pics/strom.jpg',
      audio: "./auds/strom.mp3"
    },
    {
      name: "Hugo Drax",
      movie: "Moonraker",
      fate: "was shot with poison dart gun and ejected into outer space, by Bond. ",
      pic: './pics/drax.jpg',
      audio: "./auds/drax.mp3"
    },
    {
      name: "Aristotle Kristatos",
      movie: "For Your Eyes Only",
      fate: "was killed with a knife thrown by Milos Columbo. ",
      pic: './pics/ari.jpg',
      audio: "./auds/ari.mp3"
    },
    {
      name: "Kamal Khan",
      movie: "Octopussy",
      fate: "dies when his plane crashes into a mountain. ",
      pic: './pics/khan.jpg',
      audio: "./auds/khan.mp3"
    },
    {
      name: "Max Zorin",
      movie: "A View to a Kill",
      fate: "falls to his death from the top of the Golden Gate Bridge after a fight with Bond. ",
      pic: './pics/zorin.jpg',
      audio: "./auds/zorin.mp3"
    },
    {
      name: "General Georgi Koskov",
      movie: "The Living Daylights",
      fate: "was arrested and implied to be executed by Pushkin's government offscreen. ",
      pic: './pics/georgi.jpg',
      audio: "./auds/georgi.mp3"
    }
  ];
  



/* villians[] will eventually contain an amount of villians based on user selection. this array is built
by randomly sorting the proto array of 15 and then taking the first 'x' based on the user selection */ 
  let villians = [];

  const gridDisplay = document.querySelector('#grid');
  const resultDisplay = document.querySelector('#result')
 // let capturedDisplay = document.querySelector('.captured')
  let capturedVillians = document.querySelector('#captured-villians')

  let cardsChosen = [];

  let cardsChosenIds = [];

  let cardsWon = [];
  let captured = [];

  let numGridItems = 0;

  function createBoard(){
    /* Create villians array from the protoarray based on number of cards to display */
    villiansProto.sort(() => 0.5 - Math.random());
    console.log(villiansProto)
    for (let i=0; i<numGridItems; i++){
      console.log(villiansProto[i].name + "index = " + i)
      villians.push(villiansProto[i])    
      villians.push(villiansProto[i])   
    }

   /* villians.sort(() => 0.5 - Math.random());*/
   shuffleArray(villians);

    for (let i=0; i<villians.length; i++){
      const card = document.createElement('img' );
      card.setAttribute('src', './pics/blank.png');
      card.setAttribute('data-id', i);
      card.addEventListener('click', flipCard)
      card.style.height = '100px';
      card.style.width = '100px';
      gridDisplay.appendChild(card);
    }
  }
  
/* Randomize array in-place using Durstenfeld shuffle algorithm */
function shuffleArray(villians) {
  for (var i = villians.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = villians[i];
      villians[i] = villians[j];
      villians[j] = temp;
  }
}



  function sixVillians(){
    clearItems();
    numGridItems = 6;
    createBoard();
  }

  
  function nineVillians(){
    clearItems();
    numGridItems = 9;
    createBoard();
  }

  
  function twelveVillians(){
    clearItems();
    numGridItems = 12;
    createBoard();
  }

  
  function fifteenVillians(){
    clearItems();
    numGridItems = 15;
    createBoard();
  }

  function clearItems(){
    villians = [];
    cardsWon = [];
    captured = [];
    gridDisplay.innerHTML = "";
    capturedVillians.innerHTML = "";
    resultDisplay.innerHTML = "0";
  }

  


  function flipCard(){
   
    const cardId = this.getAttribute('data-id'); 
    
    cardsChosen.push(villians[cardId].name)
    cardsChosenIds.push(cardId)
    console.log(cardsChosen)
    console.log(cardsChosenIds)
    this.setAttribute('src', villians[cardId].pic)
    if (cardsChosen.length === 2){
      setTimeout(checkMatch, 1500);
    }
  }


  function checkMatch(){
    const cards = document.querySelectorAll('#grid img')
    const optionOneId = cardsChosenIds[0]
    const optionTwoId = cardsChosenIds[1]
   
    if(optionOneId == optionTwoId){
      cards[optionOneId].setAttribute('src', '/pics/blank.png')
      cards[optionTwoId].setAttribute('src', '/pics/blank.png')
    } else 
    if(cardsChosen[0]==cardsChosen[1]){
      cards[optionOneId].setAttribute('src', '/pics/white.png')
      cards[optionTwoId].setAttribute('src', '/pics/white.png')
      cards[optionOneId].removeEventListener('click', flipCard)
      cards[optionTwoId].removeEventListener('click', flipCard)
      cardsWon.push(cardsChosen)
      captured.push(cardsChosen[0])
      let capVil = document.createElement('li');
      capVil.innerText = villians[optionOneId].name
      capturedVillians.appendChild(capVil);
    } else {
      cards[optionOneId].setAttribute('src', '/pics/blank.png')
      cards[optionTwoId].setAttribute('src', '/pics/blank.png')
    }
    resultDisplay.innerHTML = cardsWon.length
   // capturedDisplay.innerHTML = captured;





    cardsChosen = []
    cardsChosenIds = []

    if (cardsWon.length == villians.length/2){
    resultDisplay.innerHTML = "Congrats you won!"
 
    }
  }  


















  