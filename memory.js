  const villiansProto = [
    {
      name: ["Dr. Julius No", "Honey Ryder", "Sylvia Trench", "Miss Taro", "Dr. No"],
      movie: "Dr. No",
      fate: ["was boiled to death in his own reactor coolant after a fight with Bond",
             "dazzled cinema audiences, stepping out of the Caribbean sea wearing a white bikini with a large hunting knife at her side.", "introduced herself in the opening scene of Dr. No as Trench. Sylvia Trench, which Bond then mimicked with his now trademark Bond. James Bond.", "invited Bond to her house for dinner, where she laid a trap for his assassination. However, Bond smelled something was fishy and got his men to arrest Miss Taro so he could lay a trap for the assassin.", "arrives in Jamaica to investigate the suspected murder of a fellow agent and his secretary, James Bond eludes several attempts on his life. With the help of CIA agent Felix Leiter and local fisherman Quarrel, Bond follows the sinister trail of Dr. No to his island Crab Key."],
      pic:  ["./pics/drno.jpg", "./pics/honey.jpg", "./pics/sylvia.jpg", "./pics/taro.jpg", "./pics/bdrno.jpg"],
      idx: 0,
      audio: ["./auds/drno.mp3", "./auds/honey.m4a", "./auds/sylvia.m4a", "./auds/taro.m4a", "./auds/bdrno.m4a"]
    },
    {
      name: ["Rosa Klebb", "Tatiana Romanova", "From Russia With Love"],
      movie: "From Russia With Love",
      fate: ["was shot in the chest by Tatiana Romanova",
             "helped Bond steal a Lektor decoding machine, and the pair escaped on the Orient Express train.", "is assigned by his superior M to help a young Russian girl Tatiana Romanova, who has declared her desire to defect from her job as a clerk in the Russian embassy in Istanbul with an invaluable Lektor cipher machine. "],
      pic:  ["./pics/klebb.jpg", "./pics/tatiana.jpg", "./pics/brussia.jpg"],
      idx: 0,       
      audio: ["./auds/klebb.m4a", "./auds/tatiana.m4a", "./auds/brussia.m4a"]
    },
    {
      name: ["Auric Goldfinger", "Pussy Galore", "Jill Masterson", "Goldfinger"],
      movie: "Goldfinger",
      fate: ["was sucked out of a depressurising plane through a shattered window",
              "was an original Ian Fleming character from the novel. Ms. Galore ran a flying circus of female pilots, who were hired by Auric Goldfinger to fly over Fort Knox and gas the soldiers, so that Goldfinger could break in to the gold vault.", "was killed by Goldfinger's henchman Oddjob, in revenge for her betrayal. Bond awoke to find her covered from head to toe in gold paint.", "is captured by Goldfinger’s huge manservant Oddjob, and almost killed by a deadly laser beam. Drugged, he finds himself on Goldfinger’s private jet being flown to America by Pussy Galore. Bond wins overs Pussy and she helps thwart Goldfinger’s plot to rob Fort Knox."],
      pic:  ["./pics/gold.jpg", "./pics/pussy.jpg", "./pics/jill.jpg", "./pics/bgold.jpg"],
      idx: 0,
      audio: ["./auds/gold.mp3", "./auds/pussy.mp3", "./auds/jill.mp3", "./auds/bgold.m4a"]
    },
    {
      name: ["Emilio Largo", "Domino", "Fiona Volpe", "Thunderball"],
      movie: "Thunderball",
      fate: ["was shot with a harpoon from a speargun fired by his mistress Domino",
             "was the mistress of SPECTRE agent Emilio Largo. Bond discovers that Largo had killed Domino's brother, and thinks he can use that fact to get her on his side. They meet underwater as Bond untraps Domino's flipper from the coral, and Bond manages to convince her to plot against Largo", "met her end while dancing with Bond; a henchman tried to shoot Bond in the back, but he quickly spun round and the bullet killed Fiona instead.", "contacts Domino, and sees her connection to Emilio Largo, Bond and his team hunt for the bombs on board Largo’s yacht, the Disco Volante, and at his villa, Palmyra, but without success. After dispatching SPECTRE agent Fiona Volpe, Bond enlists the help of Domino by showing her proof that Largo killed her brother. "],
      pic:  ["./pics/largo.png", "./pics/domino.jpg", "./pics/fiona.jpg", "./pics/bthunderball.jpg"],    
      idx: 0,
      audio: ["./auds/largo.m4a", "./auds/domino.m4a",, "./auds/fiona.m4a", "./auds/bthunderball.m4a"]
    },
    {
      name: ["Blofeld (Donald Pleasence)", "Aki", "Kissy Suzuki", "Helga Brandt", "You Only Live Twice"],
      movie: "You Only Live Twice",
      fate: ["survives; albiet with a lower arm injury from Tanaka's throwing star.",
              "was a senior agent of the Japanese secret service, working directly under its leader Tiger Tanaka. She was confident and independent, and tricked Bond into walking over a trap door, which catapulted him down a steel slide leading to Tanaka's office.", "was a ninja working for the head of the Japanese secret service, Tiger Tanaka. She had a mock wedding with James Bond, who underwent surgery to disguise himself as a Japanese fisherman, so that the pair could explore a quiet village without being noticed.", "was a SPECTRE henchwoman who pretended to fall in love with Bond and switch to his side, only to try and kill him the next morning. For failing to kill Bond, Brandt is killed by head of SPECTRE Blofeld, who drops her into a pool of piranha fish.", "becomes Japanese in appearance, trains with Tanaka’s ninjas, and marries Kissy Suzuki."],
      pic:  ["./pics/blofeld.jpg", "./pics/aki.jpg", "./pics/kissy.jpg",  "./pics/helga.jpg", "./pics/btwice.jpg"],   
      idx: 0,
      audio: ["./auds/blofeld.mp3", "./auds/aki.mp3", "./auds/kissy.mp3", "./auds/helga.mp3", "./auds/btwice.m4a"]
    },
    {
      name: ["Blofeld (Telly Savalas)", "Tracy di Vicenzo", "On Her Majesty's Secret Service"],
      movie: "On Her Majesty's Secret Service",
      fate: ["survives. Aids in the assassination of Tracy di Vicenzo, Bond's newly married wife on their honeymoon.",
              "was the most important girl in Bond's life, becoming Mrs Tracy Bond by the end of the film she was killed with the help of Blofeld", "finds that Blofeld is brainwashing a group of women to act as his secret agents of biological warfare so that he can blackmail world powers. Bond infiltrates Piz Gloria disguised as Sir Hilary Bray of the College of Arms. When his real identity is discovered, Bond escapes and reunites with Tracy, but she is captured by Blofeld after being caught in an avalanche."],
      pic:  ["./pics/blofeld2.jpg", "./pics/tracy.jpg", "./pics/bsecret.jpg"], 
      idx: 0,
      audio: ["./auds/blofeld2.mp3", "./auds/tracy.mp3", "./auds/bsecret.m4a"]
    },
    {
      name: ["Blofeld (Charles Grey)", "Tiffany Case", "Plenty O'Toole", "Diamonds are Forever"],
      movie: "Diamonds are Forever",
      fate: ["is presumed dead", "was a diamond smuggler in part of a pipeline of smugglers that ultimately ended at Ernst Stavro Blofeld.", "was a gold digger from Las Vegas. She helped a man gamble at the craps table, but when he lost all of his money, she lost interest. She turned to leave, but went back after hearing James Bond ask for $10,000 in chips.", "poses as criminal Peter Franks and meets Tiffany Case, a glamorous gemstone smuggler. Bond and Tiffany smuggle the diamonds to Las Vegas, where Bond suspects that reclusive industrialist Willard Whyte is behind the conspiracy."],
      pic:  ["./pics/blofeld3.jpg", "./pics/tiffany.jpg", "./pics/plenty.jpg", "./pics/bdiamonds.jpg"],   
      idx: 0,
      audio: ["./auds/blo3.m4a", "./auds/tiffany.m4a", "./auds/plenty.m4a", "./auds/bdiamonds.m4a"]
    },
    {
      name: ["Dr. Kananga/Mr.Big", "Solitaire", "Rosie Carver", "Miss Caruso", "Live and Let Die"],
      movie: "Live and Let Die",
      fate: ["has his body inflate and explode after Bond forces a compressed-gas capsule down his throat. ",
            "was a psychic tarot card reader working for heroin baron Dr. Kananga. She predicted the movements of James Bond and other men who posed a threat to their operations", "was an inept and incompetent double agent, working for the CIA and for heroin baron Dr. Kananga.", "was an agent of the Italian Secret Service. She was asleep with Bond at his home when, just before 6am, the doorbell rang. Bond answered the door to find M, who announced an urgent mission.", "follows leads to New Orleans, then to San Monique, where he is aided by double agent Rosie Carver. After freeing Kananga’s girlfriend, Solitaire, a seer who foretells the future with Tarot cards, Bond discovers that Kananga and Mr. Big are one and the same. "],
      pic:  ["./pics/mrbig.jpg", "./pics/sol.jpg", "./pics/rosie.jpg", "./pics/caruso.jpg", "./pics/blive.jpg"],   
      idx: 0,
      audio: ["./auds/mrbig.m4a", "./auds/sol.mp3", "./auds/rosie.mp3", "./auds/caruso.mp3", "./auds/blive.m4a"]
    },
    {
      name: ["Francisco Scaramanga", "Mary Goodnight", "Andrea Anders", "The Man with the Golden Gun"],
      movie: "The Man with the Golden Gun",
      fate: ["was shot in the chest by Bond in the Hall of Mirrors when Bond pretends to be a statue of himself.",
            "Mary Goodnight was Bond's assistant in Hong Kong, and previously his secretary in London. She helps Bond to locate Miss Anders, the girlfriend of hitman Scaramanga.", "was the girlfriend of Francisco Scaramanga, the $1 million a shot assassin, the man with the golden gun. She sent a golden bullet to MI6 with 007 engraved on the side, so that it would be thought that Scaramanga had Bond on his hit list.", "receives a gold bullet inscribed with “007”, signifying he has been targeted by high-class professional assassin Francisco Scaramanga known as “The Man with the Golden Gun”."],
      pic:  ["./pics/scar.jpg", "./pics/mary.jpg", "./pics/andrea.jpg", "./pics/bgolden.jpg"],
      idx: 0,
      audio: ["./auds/scar.m4a", "./auds/mary.mp3", "./auds/andrea.mp3", "./auds/bgolden.m4a"]
    },
    {
      name: ["Karl Stromberg", "Anya Amasova", "Naomi", "Felicca", "The Spy Who Loved Me"],
      movie: "The Spy Who Loved Me",
      fate: ["was shot 4 times by Bond",
            "code name 'Triple X', was a KGB agent working under General Gogol. She had the same mission as Bond, to retrieve stolen microfilms for a submarine tracking system.", "was an aid for Karl Stromberg, and escorted Bond and Anya Amasova to Stromberg's oceanic citadel, the Atlantis. After Bond's meeting ended, Stromberg instructed henchman Jaws to kill the two spies.", "took a liking to Bond, and when she saw Sandor about to shoot him, she spun round and took the bullet herself.", " travels to Egypt, where illicit microfilm plans for a submarine tracking system are being offered for sale. In Cairo he meets KGB agent Major Anya Amasova, who is on the same mission. After their contact is murdered, they fight Jaws, a steel-toothed villain in the pay of industrialist Karl Stromberg."],
      pic:  ["./pics/strom.jpg", "./pics/anya.jpg", "./pics/naomi.jpg", "./pics/felicca.jpg", "./pics/bspy.jpg"],
      idx: 0,
      audio: ["./auds/strom.mp3", "./auds/anya.mp3", "./auds/naomi.mp3", "./auds/felicca.mp3", "./auds/bspy.m4a"]
    },
    {
      name: ["Hugo Drax", "Corinne Dufour", "Moonraker"],
      movie: "Moonraker",
      fate: ["was shot with poison dart gun and ejected into outer space, by Bond. ",
              "was Hugo Drax's personal assistant and pilot. She flew Bond over Drax's estate, giving him a guided tour of the Moonraker complex and flying him to meet Drax. After spending the night with Bond, Corinne revealed the location of Drax's safe, where Bond photographed secret documents. Drax discovered this, and Corinne was killed by Drax's vicious pack of dogs.", "follows clues that lead him first to Venice, where he discovers Drax’s laboratory manufacturing a highly toxic nerve gas, and then to Rio, where he teams up with CIA agent and astrophysicist Holly Goodhead."],
      pic:  ["./pics/drax.jpg", "./pics/corinne.jpg", "./pics/bmoon.jpg"],
      idx: 0,
      audio: ["./auds/drax.m4a", "./auds/corinne.mp3", "./auds/bmoon.m4a"]
    },
    {
      name: ["Aristotle Kristatos", "Melina Havelock", "For Your Eyes Only"],
      movie: "For Your Eyes Only",
      fate: ["was killed with a knife thrown by Milos Columbo. ",
              "was the daughter of two marine explorers who did salvage work for the British Secret Service. After her parents were assassinated by henchman Hector Gonzales, Melina found the hitman and killed him with a crossbow.", "is ordered to retrieve the Automatic Targeting Attack Communicator (ATAC), housed on a sunken spy ship, the St. Georges. When Sir Timothy Havelock, a marine archaeologist secretly helping the British to locate the ship, is murdered along with his wife, Bond is dispatched to Spain to find out who hired the hitman, Gonzales, but before he can find out, Gonzales is killed by Havelock’s daughter, Melina."],
      pic:  ["./pics/ari.jpg", "./pics/melina.jpg", "./pics/beyes.jpg"],
      idx: 0,
      audio: ["./auds/ari.m4a", "./auds/melina.mp3", "./auds/beyes.m4a"]
    },
    {
      name: ["Kamal Khan", "Octopussy", "Octopussy"],
      movie: "Octopussy",
      fate: ["dies when his plane crashes into a mountain.",
            "ran an all-women floating island, the girls of which were acrobats for a circus that was a front for a jewellery smuggling operation. She was a partner in crime with Kamal Khan, who stole the jewellery for himself and tried to kill Octopussy.", "swaps a real Faberge egg with a fake, and drives up the bidding against exiled Afghan prince Kamal Khan, who ultimately wins the auction. Bond follows Khan back to his palace in Rajasthan, India, where he discovers that Khan is working with Orlov, a renegade Soviet general, and is using Octopussy’s circus troupe to smuggle Soviet treasures into the West."],
      pic:  ["./pics/khan.jpg", "./pics/octo.jpg", "./pics/bocto.jpg"],
      idx: 0,
      audio: ["./auds/khan.mp3", "./auds/octo.mp3", "./auds/bocto.m4a"]
    },
    {
      name: ["Max Zorin", "Stacey Sutton", "MayDay", "A View to a Kill"],
      movie: "A View to a Kill",
      fate: ["falls to his death from the top of the Golden Gate Bridge after a fight with Bond.",
            "inherited the Sutton Oil company, which megalomaniac Max Zorin tried to take over. Zorin offered Sutton $5 million for her shares in the company, which she refused.", "was the girlfriend of Max Zorin, and also worked for him as an assassin.May Day killed Bond's chauffeur, and tried to kill Bond on several occasions. ", "recovers a microchip from the body of 003 in Siberia which is a copy of one that is impervious to the magnetic pulse of a nuclear blast. It is made by a company recently acquired by Anglo-French combine Zorin Industries, so Bond is assigned to investigate Max Zorin."],
      pic:  ["./pics/zorin.jpg", "./pics/stacey.jpg", "./pics/mayday.jpg", "./pics/bview.png"],
      idx: 0,
      audio: ["./auds/zorin.m4a", "./auds/stacey.mp3", "./auds/bview.m4a"]
    },
    {
      name: ["General Georgi Koskov", "Kara Milovy", "The Living Daylights"],
      movie: "The Living Daylights",
      fate: ["was arrested and implied to be executed by Pushkin's government offscreen.",
            "was the girlfriend of Georgi Koskov, a traitor playing both sides in the cold war. Koskov pretended to defect to the West, and got Milovy to shoot blanks at him to make it look more real.", "is sent to Czechoslovakia to support the defection of a Russian Army Officer, Koskov. He becomes suspicious when the sniper he has to assassinate appears to be a glamorous cellist, Kara Milovy. "],
      pic:  ["./pics/georgi.jpg", "./pics/kara.jpg", "./pics/bliving.jpg"],
      idx: 0,
      audio: ["./auds/georgi.mp3", "./auds/kara.mp3", "./auds/bliving.m4a"]
    }
  ];

  const songs = ["./songs/bondtheme.m4a", "./songs/goldfinger.m4a", "./songs/diamonds.m4a", "./songs/live.m4a", "./songs/sheena.m4a"];
  
  const VILLIANS = 0;
  const GIRLS = 1;
  const BOND = 2;

let gorv = 0;

let timerEl = document.getElementById('timer')
/* villians[] will eventually contain an amount of villians based on user selection. this array is built
by randomly sorting the proto array of 15 and then taking the first 'x' based on the user selection */ 
  let villians = [];

  const gridDisplay = document.querySelector('#grid');
  const resultDisplay = document.querySelector('#result')
 // let capturedDisplay = document.querySelector('.captured')
  let capturedVillians = document.querySelector('#captured-villians')

  let cardsChosen = [];

  let cardsChosenIds = [];

  let cardsWon = [];
  let captured = [];

  let numGridItems = 0;

  let noCardsFlipped = true;



  function createBoard(){
    noCardsFlipped = true;
    timerEl.textContent = "";
    cardsChosen = [];
    cardsChosenIds = [];
    cardsWon = [];
    captured = [];
    clearInterval(timer)
    /* Create villians array from the protoarray based on number of cards to display */
    villiansProto.sort(() => 0.5 - Math.random());
    for (let i=0; i<numGridItems; i++){
      villians.push(villiansProto[i])    
      villians.push(villiansProto[i])   
    }
    villians.forEach((villian) => {
      console.log("in the foreach loop  ")
      villian.idx = 0;
      if (gorv === GIRLS){
        villian.idx=Math.floor(Math.random()*(villian.name.length-1))
        if (villian.idx === 0){
          villian.idx = 1
        }
      }
      if (gorv === BOND){
        villian.idx = villian.name.length-1
      }
      console.log("villian.idx = " + villian.idx)
    });

   /* villians.sort(() => 0.5 - Math.random());*/
   shuffleArray(villians);

    for (let i=0; i<villians.length; i++){
      const card = document.createElement('img' );
      card.setAttribute('src', './pics/blank.png');
      card.setAttribute('data-id', i);
      card.addEventListener('click', flipCard)
 //     card.style.height = '100px';
   //   card.style.width = '100px';
      gridDisplay.appendChild(card);
      console.log("in villians length loop  i = " + i)
    }
  }
  
/* Randomize array in-place using Durstenfeld shuffle algorithm */
function shuffleArray(villians) {
  for (var i = villians.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = villians[i];
      villians[i] = villians[j];
      villians[j] = temp;
  }
}



function girls(){
  clearItems();
  gorv=GIRLS;
  createBoard();
}

function villiansBtn(){
  clearItems();
  gorv=VILLIANS;
  createBoard();
}

function bondBtn(){
  clearItems();
  gorv=BOND;
  createBoard();
}


  function sixVillians(){
    clearItems();
    numGridItems = 6;
    createBoard();
  }

  
  function nineVillians(){
    clearItems();
    numGridItems = 9;
    createBoard();
  }

  
  function twelveVillians(){
    clearItems();
    numGridItems = 12;
    createBoard();
  }

  
  function fifteenVillians(){
    clearItems();
    numGridItems = 15;
    createBoard();
  }


  function clearItems(){
    villians = [];
    cardsWon = [];
    captured = [];
    gridDisplay.innerHTML = "";
    capturedVillians.innerHTML = "";
    resultDisplay.innerHTML = "0";
  }

  let soundPlayer;
  function playMusic(){
    let songIdx = Math.floor(Math.random()*songs.length);
    console.log("songIdx = " + songIdx)
    soundPlayer = new Audio (songs[songIdx]);
    soundPlayer.loop = true;
    soundPlayer.volume = 0.6;
    soundPlayer.currentTime = 1;
    soundPlayer.play();
  }

 

  
  let timerStarted = false;
  let timerRunning = false;
  let timer;
  let currentTime;
  function flipCard(){
    if (noCardsFlipped){
      noCardsFlipped = false;
      console.log("Start the timer")
      startTimer();
      playMusic();  
      
    }
   
    const cardId = this.getAttribute('data-id'); 
    console.log("cardId = " + cardId + " " + villians[cardId].idx)
    
    cardsChosen.push(villians[cardId].name[villians[cardId].idx])
    cardsChosenIds.push(cardId)
    console.log(cardsChosen)
    console.log(cardsChosenIds)
    this.setAttribute('src', villians[cardId].pic[villians[cardId].idx])
    if (cardsChosen.length === 2){
      setTimeout(checkMatch, 1500);
    }
  }

  function startTimer() {
    timerStarted = true;
    timerRunning = true;
    currentTime = 0;
    timer = setInterval(countUp,1000);
  }
  
  function countUp(){
    currentTime++;
    let min = Math.floor(currentTime / 60);
    let sec = (currentTime % 60);
    if (min < 1) {min = "";}
    if (sec < 10) {sec = "0"+sec;}
   
    timerEl.textContent = min+':'+sec;
  }


  function checkMatch(){
    const cards = document.querySelectorAll('#grid img')
    const optionOneId = cardsChosenIds[0]
    const optionTwoId = cardsChosenIds[1]
   
    if(optionOneId == optionTwoId){
      cards[optionOneId].setAttribute('src', './pics/blank.png')
      cards[optionTwoId].setAttribute('src', './pics/blank.png')
    } else 
    if(cardsChosen[0]==cardsChosen[1]){
      cards[optionOneId].setAttribute('src', './pics/white.png')
      cards[optionTwoId].setAttribute('src', './pics/white.png')
      cards[optionOneId].removeEventListener('click', flipCard)
      cards[optionTwoId].removeEventListener('click', flipCard)
      cardsWon.push(cardsChosen)
      captured.push(cardsChosen[0])
      let capVil = document.createElement('li');
      capVil.innerText = " " + villians[optionOneId].name[villians[optionOneId].idx]
      capturedVillians.appendChild(capVil);
    } else {
      cards[optionOneId].setAttribute('src', './pics/blank.png')
      cards[optionTwoId].setAttribute('src', './pics/blank.png')
    }
    resultDisplay.innerHTML = cardsWon.length
   // capturedDisplay.innerHTML = captured;
    cardsChosen = []
    cardsChosenIds = []

    if (cardsWon.length == villians.length/2){
    resultDisplay.innerHTML = "Congrats you won!"
    clearInterval(timer)
    soundPlayer.pause();
    soundPlayer.currentTime = 0;
 
    }
  }  
 